<!DOCTYPE html>
<html>
  <head>
    <title>Weather Station Sample Page</title>

    <meta charset="UTF-8" />
    <meta name="description" content="Weather Station Sample Page" />
    <meta name="author" content="CarZ" />
    <meta
      name="viewport"
      content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"
    />
    <script
      type="text/javascript"
      src="public/javascripts/chart.js"
    ></script>
    <script
      type="text/javascript"
      src="client/chart/createChart.js"
    ></script>
  </head>

  <body style="text-align: center">
    <h1>Weather Station Sample Page</h1>
    <ul id="weather-info"></ul>

    <canvas id="linearChart" width="800" height="400" style="margin: auto">
    </canvas>

    <button onclick="addNumber()">add number</button>

    <button onclick="removeNumber()">remove number</button>

    <script src="../socket.io/socket.io.js"></script>
    <script>
      const example = new linearChart("linearChart");
      var socket = io();
      const dataList = document.getElementById("weather-info");
      var counter = 1;
      socket.on("rasp-message", (data) => {
	data = JSON.parse(data);
	console.log(data + "\n");
        console.log("\ntemperature " + data["temperature"]);
	example.addToChart({
          label: counter,
          temperature:
            data.temperature == undefined ? 0 : data["temperature"],
        });
        counter++;
      });
    </script>
  </body>
</html>
